WeatherPy

Note

Instructions have been included for each segment. You do not have to follow them exactly, but they are included to help you think through the steps.
In [9]:
# Dependencies and Setup
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
import requests
import time
from scipy.stats import linregress
import json

# Import API key
from api_keys import weather_api_key

# Incorporated citipy to determine city based on latitude and longitude
from citipy import citipy

# Output File (CSV)
output_data_file = "output_data/cities.csv"

# Range of latitudes and longitudes
lat_range = (-90, 90)
lng_range = (-180, 180)
Generate Cities List
In [10]:
# List for holding lat_lngs and cities
lat_lngs = []
cities = []

# Create a set of random lat and lng combinations
lats = np.random.uniform(low=-90.000, high=90.000, size=1500)
lngs = np.random.uniform(low=-180.000, high=180.000, size=1500)
lat_lngs = zip(lats, lngs)

# Identify nearest city for each lat, lng combination
for lat_lng in lat_lngs:
    city = citipy.nearest_city(lat_lng[0], lat_lng[1]).city_name
    
    # If the city is unique, then add it to a our cities list
    if city not in cities:
        cities.append(city)

# Print the city count to confirm sufficient count
len(cities)
Out[10]:
626
Perform API Calls

Perform a weather check on each city using a series of successive API calls.
Include a print log of each city as it'sbeing processed (with the city number and city name).
In [11]:
url = "http://api.openweathermap.org/data/2.5/forecast?id=524901&APPID="
target_url = url + weather_api_key
target_url
Out[11]:
'http://api.openweathermap.org/data/2.5/forecast?id=524901&APPID=1ea7aa6d2ff7e57f0001448188993e6e'
In [12]:
#weather_response = requests.get(target_url)
#weather_json = weather_response.json()
#print(json.dumps(weather_json, indent=4, sort_keys=True))
In [13]:
#print(weather_json['city']['name'])
print(weather_json['city']['name'])
Tarragona
In [14]:
# set up lists to hold reponse info
cityname = []
cloudiness = []
country = []
date = []
humidity = []
lat = []
lng = []
max_temp = []
wind_speed = []
count = 0

#  response = requests.get(query_url + city).json()
    
# Loop through the list of cities and perform a request for data on each

for city in cities:
    weather_response = requests.get(target_url + "&q=" + city + "&units=Imperial")
    weather_json = weather_response.json()
    try:
        cityname.append(weather_json['city']['name'])
        cloudiness.append(weather_json['list'][0]['clouds']['all'])
        country.append(weather_json['city']['country'])
        date.append(weather_json['list'][0]['dt'])
        humidity.append(weather_json['list'][0]['main']['humidity'])
        lat.append(weather_json['city']['coord']['lat'])
        lng.append(weather_json['city']['coord']['lon'])
        max_temp.append(weather_json['list'][0]['main']['temp_max'])
        wind_speed.append(weather_json['list'][0]['wind']['speed'])
        count = count + 1
        print(f"Processing record {count} of Set 1 | {city}")
    except:
        print("Record not found") 
        pass
        
print("I made it through the gauntlet. The message survived!")
Record not found
Processing record 1 of Set 1 | lagoa
Processing record 2 of Set 1 | rikitea
Processing record 3 of Set 1 | albany
Processing record 4 of Set 1 | esperance
Processing record 5 of Set 1 | faanui
Processing record 6 of Set 1 | hithadhoo
Record not found
Processing record 7 of Set 1 | kikwit
Record not found
Processing record 8 of Set 1 | klaksvik
Processing record 9 of Set 1 | saint-philippe
Processing record 10 of Set 1 | banda aceh
Processing record 11 of Set 1 | new norfolk
Processing record 12 of Set 1 | tasiilaq
Processing record 13 of Set 1 | port lincoln
Processing record 14 of Set 1 | tingi
Processing record 15 of Set 1 | barrow
Processing record 16 of Set 1 | hambantota
Processing record 17 of Set 1 | kavaratti
Processing record 18 of Set 1 | port alfred
Processing record 19 of Set 1 | zyryanka
Processing record 20 of Set 1 | beloha
Processing record 21 of Set 1 | punta arenas
Processing record 22 of Set 1 | dingle
Processing record 23 of Set 1 | la ronge
Processing record 24 of Set 1 | arecibo
Processing record 25 of Set 1 | byron bay
Processing record 26 of Set 1 | hermanus
Processing record 27 of Set 1 | ushuaia
Processing record 28 of Set 1 | codrington
Processing record 29 of Set 1 | chokurdakh
Processing record 30 of Set 1 | gat
Processing record 31 of Set 1 | carnarvon
Processing record 32 of Set 1 | yulin
Processing record 33 of Set 1 | busselton
Processing record 34 of Set 1 | tamala
Processing record 35 of Set 1 | garowe
Processing record 36 of Set 1 | pombal
Processing record 37 of Set 1 | ancud
Processing record 38 of Set 1 | torbay
Processing record 39 of Set 1 | cape town
Processing record 40 of Set 1 | mastic beach
Processing record 41 of Set 1 | pisco
Processing record 42 of Set 1 | palauig
Processing record 43 of Set 1 | kodiak
Processing record 44 of Set 1 | makakilo city
Processing record 45 of Set 1 | qaanaaq
Processing record 46 of Set 1 | kununurra
Record not found
Processing record 47 of Set 1 | manhattan
Processing record 48 of Set 1 | nuuk
Processing record 49 of Set 1 | turinsk
Processing record 50 of Set 1 | mataura
Processing record 51 of Set 1 | jamestown
Processing record 52 of Set 1 | talaya
Record not found
Processing record 53 of Set 1 | umm kaddadah
Processing record 54 of Set 1 | mahebourg
Record not found
Processing record 55 of Set 1 | narsaq
Processing record 56 of Set 1 | castro
Processing record 57 of Set 1 | pombia
Processing record 58 of Set 1 | baneh
Processing record 59 of Set 1 | bluff
Processing record 60 of Set 1 | camacha
Record not found
Processing record 61 of Set 1 | los llanos de aridane
Processing record 62 of Set 1 | ketchikan
Processing record 63 of Set 1 | praia
Processing record 64 of Set 1 | hilo
Processing record 65 of Set 1 | xining
Processing record 66 of Set 1 | port elizabeth
Processing record 67 of Set 1 | vaini
Processing record 68 of Set 1 | ostrovnoy
Processing record 69 of Set 1 | itanhaem
Processing record 70 of Set 1 | mujiayingzi
Processing record 71 of Set 1 | altamont
Processing record 72 of Set 1 | nome
Processing record 73 of Set 1 | chapais
Processing record 74 of Set 1 | katsuura
Processing record 75 of Set 1 | chulman
Processing record 76 of Set 1 | ucluelet
Record not found
Processing record 77 of Set 1 | shahreza
Processing record 78 of Set 1 | palmer
Processing record 79 of Set 1 | avarua
Processing record 80 of Set 1 | cabo san lucas
Processing record 81 of Set 1 | san quintin
Processing record 82 of Set 1 | christchurch
Record not found
Processing record 83 of Set 1 | east london
Processing record 84 of Set 1 | chuy
Processing record 85 of Set 1 | gurlan
Processing record 86 of Set 1 | butaritari
Processing record 87 of Set 1 | dunedin
Processing record 88 of Set 1 | salalah
Processing record 89 of Set 1 | bredasdorp
Processing record 90 of Set 1 | college
Processing record 91 of Set 1 | sonqor
Processing record 92 of Set 1 | sao filipe
Processing record 93 of Set 1 | kapaa
Processing record 94 of Set 1 | san ramon
Processing record 95 of Set 1 | provideniya
Processing record 96 of Set 1 | sangar
Record not found
Processing record 97 of Set 1 | campbell river
Processing record 98 of Set 1 | mar del plata
Processing record 99 of Set 1 | bonavista
Processing record 100 of Set 1 | knysna
Processing record 101 of Set 1 | altay
Processing record 102 of Set 1 | talnakh
Processing record 103 of Set 1 | salto de agua
Processing record 104 of Set 1 | miranda
Processing record 105 of Set 1 | qasigiannguit
Processing record 106 of Set 1 | whitehorse
Processing record 107 of Set 1 | barra do garcas
Processing record 108 of Set 1 | banjar
Processing record 109 of Set 1 | cururupu
Processing record 110 of Set 1 | kahului
Record not found
Processing record 111 of Set 1 | angoche
Processing record 112 of Set 1 | santa vitoria do palmar
Processing record 113 of Set 1 | cidreira
Processing record 114 of Set 1 | kalianget
Processing record 115 of Set 1 | fitjar
Record not found
Processing record 116 of Set 1 | kudahuvadhoo
Record not found
Processing record 117 of Set 1 | ambon
Processing record 118 of Set 1 | sioux lookout
Processing record 119 of Set 1 | atuona
Processing record 120 of Set 1 | margate
Record not found
Record not found
Record not found
Processing record 121 of Set 1 | agua prieta
Processing record 122 of Set 1 | frutal
Processing record 123 of Set 1 | hobart
Processing record 124 of Set 1 | yellowknife
Processing record 125 of Set 1 | matagami
Processing record 126 of Set 1 | constitucion
Processing record 127 of Set 1 | bubaque
Processing record 128 of Set 1 | arraial do cabo
Processing record 129 of Set 1 | ouahigouya
Processing record 130 of Set 1 | namatanai
Processing record 131 of Set 1 | tianpeng
Processing record 132 of Set 1 | cairns
Processing record 133 of Set 1 | alencon
Processing record 134 of Set 1 | lagos
Processing record 135 of Set 1 | taloqan
Record not found
Record not found
Processing record 136 of Set 1 | ushumun
Record not found
Processing record 137 of Set 1 | saskylakh
Processing record 138 of Set 1 | okhotsk
Record not found
Processing record 139 of Set 1 | plattsburgh
Processing record 140 of Set 1 | mount gambier
Processing record 141 of Set 1 | ovalle
Processing record 142 of Set 1 | port blair
Processing record 143 of Set 1 | dikson
Processing record 144 of Set 1 | nikolskoye
Processing record 145 of Set 1 | maldonado
Processing record 146 of Set 1 | hasaki
Processing record 147 of Set 1 | date
Processing record 148 of Set 1 | dos hermanas
Processing record 149 of Set 1 | clyde river
Processing record 150 of Set 1 | bam
Processing record 151 of Set 1 | santiago de cao
Processing record 152 of Set 1 | puerto madryn
Processing record 153 of Set 1 | severo-kurilsk
Processing record 154 of Set 1 | petauke
Processing record 155 of Set 1 | saldanha
Processing record 156 of Set 1 | marsh harbour
Processing record 157 of Set 1 | kieta
Processing record 158 of Set 1 | venado tuerto
Processing record 159 of Set 1 | sabang
Processing record 160 of Set 1 | tieling
Processing record 161 of Set 1 | tahoua
Processing record 162 of Set 1 | beringovskiy
Processing record 163 of Set 1 | norman wells
Processing record 164 of Set 1 | flinders
Processing record 165 of Set 1 | kisangani
Processing record 166 of Set 1 | kerrville
Processing record 167 of Set 1 | san cristobal
Record not found
Processing record 168 of Set 1 | cherskiy
Processing record 169 of Set 1 | sao gabriel da cachoeira
Processing record 170 of Set 1 | kaitangata
Processing record 171 of Set 1 | georgetown
Processing record 172 of Set 1 | upernavik
Processing record 173 of Set 1 | tual
Processing record 174 of Set 1 | hovd
Processing record 175 of Set 1 | rawson
Record not found
Record not found
Processing record 176 of Set 1 | udalguri
Processing record 177 of Set 1 | ambilobe
Processing record 178 of Set 1 | iqaluit
Processing record 179 of Set 1 | mysen
Processing record 180 of Set 1 | qaqortoq
Record not found
Processing record 181 of Set 1 | rawlins
Processing record 182 of Set 1 | kirakira
Processing record 183 of Set 1 | poum
Processing record 184 of Set 1 | ribeira grande
Processing record 185 of Set 1 | bhimunipatnam
Processing record 186 of Set 1 | sarkand
Processing record 187 of Set 1 | ekibastuz
Processing record 188 of Set 1 | riyadh
Processing record 189 of Set 1 | saint stephen
Processing record 190 of Set 1 | carballo
Processing record 191 of Set 1 | pacific grove
Processing record 192 of Set 1 | alvaraes
Record not found
Processing record 193 of Set 1 | coromoro
Processing record 194 of Set 1 | sitka
Processing record 195 of Set 1 | waterloo
Record not found
Processing record 196 of Set 1 | egvekinot
Processing record 197 of Set 1 | khatanga
Record not found
Processing record 198 of Set 1 | barcelos
Processing record 199 of Set 1 | ponta delgada
Processing record 200 of Set 1 | komsomolskiy
Processing record 201 of Set 1 | alice springs
Processing record 202 of Set 1 | kanash
Processing record 203 of Set 1 | saint-augustin
Record not found
Processing record 204 of Set 1 | pevek
Processing record 205 of Set 1 | faya
Record not found
Processing record 206 of Set 1 | rokupr
Processing record 207 of Set 1 | tazovskiy
Processing record 208 of Set 1 | touros
Record not found
Processing record 209 of Set 1 | rio grande
Processing record 210 of Set 1 | airai
Processing record 211 of Set 1 | vardo
Processing record 212 of Set 1 | kargil
Processing record 213 of Set 1 | puerto escondido
Processing record 214 of Set 1 | victoria
Processing record 215 of Set 1 | port augusta
Record not found
Processing record 216 of Set 1 | arawa
Processing record 217 of Set 1 | coihaique
Processing record 218 of Set 1 | kapit
Processing record 219 of Set 1 | katobu
Processing record 220 of Set 1 | leningradskiy
Processing record 221 of Set 1 | logten
Processing record 222 of Set 1 | burns lake
Processing record 223 of Set 1 | ahuimanu
Record not found
Processing record 224 of Set 1 | roccastrada
Processing record 225 of Set 1 | hay river
Processing record 226 of Set 1 | noormarkku
Processing record 227 of Set 1 | avera
Processing record 228 of Set 1 | road town
Record not found
Processing record 229 of Set 1 | warrington
Record not found
Processing record 230 of Set 1 | lavrentiya
Processing record 231 of Set 1 | kavieng
Record not found
Processing record 232 of Set 1 | verkhnetulomskiy
Record not found
Processing record 233 of Set 1 | portland
Processing record 234 of Set 1 | oranjestad
Processing record 235 of Set 1 | caserta
Processing record 236 of Set 1 | linhai
Processing record 237 of Set 1 | ambulu
Processing record 238 of Set 1 | mattru
Processing record 239 of Set 1 | liverpool
Processing record 240 of Set 1 | broken hill
Processing record 241 of Set 1 | ljungby
Processing record 242 of Set 1 | ust-ilimsk
Processing record 243 of Set 1 | sibolga
Processing record 244 of Set 1 | mishkino
Processing record 245 of Set 1 | sao joao da barra
Processing record 246 of Set 1 | bako
Processing record 247 of Set 1 | tommot
Processing record 248 of Set 1 | kurchum
Processing record 249 of Set 1 | souillac
Processing record 250 of Set 1 | husavik
Processing record 251 of Set 1 | mindelo
Processing record 252 of Set 1 | benicarlo
Processing record 253 of Set 1 | the valley
Processing record 254 of Set 1 | san andres
Processing record 255 of Set 1 | kailua
Processing record 256 of Set 1 | buala
Processing record 257 of Set 1 | verkhnyaya inta
Record not found
Processing record 258 of Set 1 | puerto ayora
Record not found
Processing record 259 of Set 1 | presidente medici
Processing record 260 of Set 1 | nishihara
Processing record 261 of Set 1 | aasiaat
Processing record 262 of Set 1 | linxia
Record not found
Processing record 263 of Set 1 | sabya
Processing record 264 of Set 1 | thompson
Processing record 265 of Set 1 | morondava
Processing record 266 of Set 1 | opuwo
Processing record 267 of Set 1 | kologriv
Processing record 268 of Set 1 | izhma
Processing record 269 of Set 1 | cayenne
Processing record 270 of Set 1 | juneau
Processing record 271 of Set 1 | detchino
Processing record 272 of Set 1 | fortuna
Processing record 273 of Set 1 | namibe
Record not found
Processing record 274 of Set 1 | lufilufi
Processing record 275 of Set 1 | beyneu
Processing record 276 of Set 1 | half moon bay
Processing record 277 of Set 1 | vostok
Processing record 278 of Set 1 | laguna
Processing record 279 of Set 1 | orotukan
Processing record 280 of Set 1 | haines junction
Processing record 281 of Set 1 | aden
Processing record 282 of Set 1 | baruun-urt
Processing record 283 of Set 1 | santa ana
Processing record 284 of Set 1 | itupiranga
Processing record 285 of Set 1 | kondinskoye
Processing record 286 of Set 1 | maragogi
Processing record 287 of Set 1 | matara
Processing record 288 of Set 1 | hofn
Processing record 289 of Set 1 | mayo
Record not found
Processing record 290 of Set 1 | ponta do sol
Processing record 291 of Set 1 | mayya
Record not found
Processing record 292 of Set 1 | blagnac
Processing record 293 of Set 1 | gizo
Record not found
Processing record 294 of Set 1 | pangkalanbuun
Processing record 295 of Set 1 | ilhabela
Processing record 296 of Set 1 | fairbanks
Processing record 297 of Set 1 | eydhafushi
Processing record 298 of Set 1 | saint-michel-des-saints
Processing record 299 of Set 1 | rio claro
Processing record 300 of Set 1 | ahipara
Record not found
Processing record 301 of Set 1 | nemuro
Processing record 302 of Set 1 | luderitz
Record not found
Processing record 303 of Set 1 | yelizovo
Processing record 304 of Set 1 | vestmannaeyjar
Processing record 305 of Set 1 | grindavik
Processing record 306 of Set 1 | catuday
Processing record 307 of Set 1 | ovre ardal
Processing record 308 of Set 1 | winslow
Processing record 309 of Set 1 | marawi
Processing record 310 of Set 1 | virginia beach
Processing record 311 of Set 1 | baza
Processing record 312 of Set 1 | yar-sale
Record not found
Processing record 313 of Set 1 | saint anthony
Processing record 314 of Set 1 | saint george
Processing record 315 of Set 1 | inta
Processing record 316 of Set 1 | cabedelo
Record not found
Processing record 317 of Set 1 | muravlenko
Processing record 318 of Set 1 | longyearbyen
Processing record 319 of Set 1 | ilulissat
Processing record 320 of Set 1 | minab
Processing record 321 of Set 1 | esmeraldas
Processing record 322 of Set 1 | sisimiut
Record not found
Processing record 323 of Set 1 | rorvik
Processing record 324 of Set 1 | siguiri
Processing record 325 of Set 1 | luzhou
Processing record 326 of Set 1 | yulara
Processing record 327 of Set 1 | oussouye
Processing record 328 of Set 1 | solnechnyy
Processing record 329 of Set 1 | tiksi
Processing record 330 of Set 1 | teguldet
Processing record 331 of Set 1 | villamontes
Processing record 332 of Set 1 | vao
Processing record 333 of Set 1 | huilong
Processing record 334 of Set 1 | bull savanna
Processing record 335 of Set 1 | taltal
Processing record 336 of Set 1 | tekkali
Processing record 337 of Set 1 | adrar
Processing record 338 of Set 1 | ritchie
Processing record 339 of Set 1 | sisophon
Processing record 340 of Set 1 | zabol
Processing record 341 of Set 1 | santana do livramento
Processing record 342 of Set 1 | broome
Record not found
Processing record 343 of Set 1 | bodden town
Processing record 344 of Set 1 | bulawayo
Processing record 345 of Set 1 | camargo
Processing record 346 of Set 1 | atasu
Processing record 347 of Set 1 | malanje
Processing record 348 of Set 1 | isangel
Processing record 349 of Set 1 | bardsir
Record not found
Processing record 350 of Set 1 | itarema
Processing record 351 of Set 1 | scarborough
Record not found
Processing record 352 of Set 1 | lompoc
Processing record 353 of Set 1 | beisfjord
Processing record 354 of Set 1 | sebezh
Processing record 355 of Set 1 | karratha
Processing record 356 of Set 1 | zhigansk
Processing record 357 of Set 1 | gao
Processing record 358 of Set 1 | gravdal
Processing record 359 of Set 1 | valparaiso
Processing record 360 of Set 1 | taoudenni
Processing record 361 of Set 1 | elizabeth city
Processing record 362 of Set 1 | bethel
Processing record 363 of Set 1 | kruisfontein
Processing record 364 of Set 1 | geraldton
Processing record 365 of Set 1 | lilongwe
Record not found
Record not found
Processing record 366 of Set 1 | uruzgan
Processing record 367 of Set 1 | fukue
Processing record 368 of Set 1 | ixtapa
Processing record 369 of Set 1 | quzhou
Processing record 370 of Set 1 | teguise
Processing record 371 of Set 1 | inongo
Processing record 372 of Set 1 | tynda
Record not found
Processing record 373 of Set 1 | bilibino
Processing record 374 of Set 1 | lazaro cardenas
Processing record 375 of Set 1 | hinova
Processing record 376 of Set 1 | vrangel
Processing record 377 of Set 1 | abu zabad
Processing record 378 of Set 1 | ariquemes
Processing record 379 of Set 1 | iranshahr
Processing record 380 of Set 1 | comodoro rivadavia
Processing record 381 of Set 1 | kita
Processing record 382 of Set 1 | kawalu
Processing record 383 of Set 1 | sorbhog
Processing record 384 of Set 1 | arman
Processing record 385 of Set 1 | raudeberg
Processing record 386 of Set 1 | vila franca do campo
Processing record 387 of Set 1 | santa cruz
Processing record 388 of Set 1 | katangli
Processing record 389 of Set 1 | lebu
Processing record 390 of Set 1 | mianyang
Processing record 391 of Set 1 | pangnirtung
Processing record 392 of Set 1 | jalalabad
Processing record 393 of Set 1 | ngunguru
Processing record 394 of Set 1 | hirara
Processing record 395 of Set 1 | moengo
Processing record 396 of Set 1 | petropavlovskoye
Processing record 397 of Set 1 | igarka
Processing record 398 of Set 1 | birao
Processing record 399 of Set 1 | oum hadjer
Processing record 400 of Set 1 | amuntai
Processing record 401 of Set 1 | iskateley
Record not found
Processing record 402 of Set 1 | te anau
Processing record 403 of Set 1 | aklavik
Processing record 404 of Set 1 | saint-ambroise
Record not found
Processing record 405 of Set 1 | tuatapere
Processing record 406 of Set 1 | kautokeino
Processing record 407 of Set 1 | tuensang
Processing record 408 of Set 1 | port hardy
Processing record 409 of Set 1 | caravelas
Processing record 410 of Set 1 | kingman
Processing record 411 of Set 1 | sao jose da coroa grande
Processing record 412 of Set 1 | santa isabel do rio negro
Processing record 413 of Set 1 | limbdi
Processing record 414 of Set 1 | bowen
Processing record 415 of Set 1 | bertoua
Processing record 416 of Set 1 | tiarei
Processing record 417 of Set 1 | brandon
Processing record 418 of Set 1 | pontianak
Processing record 419 of Set 1 | lorengau
Processing record 420 of Set 1 | chancay
Record not found
Processing record 421 of Set 1 | vuktyl
Processing record 422 of Set 1 | barabai
Processing record 423 of Set 1 | fayetteville
Processing record 424 of Set 1 | lukovetskiy
Processing record 425 of Set 1 | bathsheba
Processing record 426 of Set 1 | riberalta
Processing record 427 of Set 1 | norden
Processing record 428 of Set 1 | viedma
Processing record 429 of Set 1 | arlit
Processing record 430 of Set 1 | jacala
Processing record 431 of Set 1 | cambridge
Processing record 432 of Set 1 | hwange
Record not found
Processing record 433 of Set 1 | mayskiy
Record not found
Processing record 434 of Set 1 | mehamn
Processing record 435 of Set 1 | energeticheskiy
Processing record 436 of Set 1 | basco
Record not found
Processing record 437 of Set 1 | blyznyuky
Processing record 438 of Set 1 | agadez
Processing record 439 of Set 1 | nushki
Record not found
Processing record 440 of Set 1 | isla mujeres
Processing record 441 of Set 1 | pontian kecil
Processing record 442 of Set 1 | ipaba
Processing record 443 of Set 1 | luan
Processing record 444 of Set 1 | seymchan
Processing record 445 of Set 1 | mitu
Processing record 446 of Set 1 | puerto narino
Processing record 447 of Set 1 | meadow lake
Processing record 448 of Set 1 | bandarbeyla
Processing record 449 of Set 1 | richards bay
Processing record 450 of Set 1 | salinopolis
Processing record 451 of Set 1 | puerto baquerizo moreno
Processing record 452 of Set 1 | harper
Processing record 453 of Set 1 | san patricio
Processing record 454 of Set 1 | bambous virieux
Processing record 455 of Set 1 | tuktoyaktuk
Record not found
Processing record 456 of Set 1 | henties bay
Processing record 457 of Set 1 | morlaix
Processing record 458 of Set 1 | sillamae
Processing record 459 of Set 1 | carora
Processing record 460 of Set 1 | luce
Processing record 461 of Set 1 | menongue
Processing record 462 of Set 1 | yara
Processing record 463 of Set 1 | dakar
Processing record 464 of Set 1 | nouadhibou
Processing record 465 of Set 1 | beipiao
Processing record 466 of Set 1 | oranjemund
Processing record 467 of Set 1 | maraba
Processing record 468 of Set 1 | karachi
Record not found
Processing record 469 of Set 1 | wasilla
Processing record 470 of Set 1 | inca
Processing record 471 of Set 1 | shihezi
Processing record 472 of Set 1 | ewo
Processing record 473 of Set 1 | turgutlu
Processing record 474 of Set 1 | severo-yeniseyskiy
Processing record 475 of Set 1 | kalmunai
Processing record 476 of Set 1 | homer
Processing record 477 of Set 1 | kitimat
Processing record 478 of Set 1 | kyakhta
Processing record 479 of Set 1 | iraan
Processing record 480 of Set 1 | tevaitoa
Processing record 481 of Set 1 | kristianstad
Processing record 482 of Set 1 | lasa
Processing record 483 of Set 1 | rosario
Processing record 484 of Set 1 | belmonte
Processing record 485 of Set 1 | merauke
Record not found
Processing record 486 of Set 1 | boa vista
Processing record 487 of Set 1 | ormara
Processing record 488 of Set 1 | kendari
Processing record 489 of Set 1 | halle
Processing record 490 of Set 1 | sinazongwe
Processing record 491 of Set 1 | atambua
Processing record 492 of Set 1 | acapulco
Processing record 493 of Set 1 | tura
Processing record 494 of Set 1 | eureka
Record not found
Processing record 495 of Set 1 | guayaramerin
Processing record 496 of Set 1 | deputatskiy
Processing record 497 of Set 1 | santiago del estero
Processing record 498 of Set 1 | pouebo
Processing record 499 of Set 1 | sanghar
Record not found
Record not found
Record not found
Processing record 500 of Set 1 | high rock
Processing record 501 of Set 1 | biak
Record not found
Processing record 502 of Set 1 | gboko
Processing record 503 of Set 1 | castrillon
Processing record 504 of Set 1 | pizarro
Processing record 505 of Set 1 | tecoanapa
Processing record 506 of Set 1 | yumen
Processing record 507 of Set 1 | quatre cocos
Processing record 508 of Set 1 | danilov
Processing record 509 of Set 1 | leopold
Processing record 510 of Set 1 | breves
Processing record 511 of Set 1 | genhe
Processing record 512 of Set 1 | mozarlandia
Processing record 513 of Set 1 | avondale
Processing record 514 of Set 1 | verkhoyansk
Processing record 515 of Set 1 | ulaangom
Processing record 516 of Set 1 | cabadiangan
Processing record 517 of Set 1 | kasamwa
Processing record 518 of Set 1 | athabasca
Processing record 519 of Set 1 | constantine
Processing record 520 of Set 1 | kargasok
Processing record 521 of Set 1 | wanning
Processing record 522 of Set 1 | shakawe
Processing record 523 of Set 1 | novikovo
Processing record 524 of Set 1 | kouango
Processing record 525 of Set 1 | sola
Processing record 526 of Set 1 | puerto leguizamo
Processing record 527 of Set 1 | miandrivazo
Processing record 528 of Set 1 | tiznit
Processing record 529 of Set 1 | coahuayana
Processing record 530 of Set 1 | olinda
Processing record 531 of Set 1 | warwick
Processing record 532 of Set 1 | muros
Processing record 533 of Set 1 | helong
Processing record 534 of Set 1 | sangmelima
Processing record 535 of Set 1 | monroe
Processing record 536 of Set 1 | yeniseysk
Record not found
Processing record 537 of Set 1 | mao
Processing record 538 of Set 1 | kodinsk
Processing record 539 of Set 1 | vila velha
Record not found
Processing record 540 of Set 1 | san cayetano
Processing record 541 of Set 1 | pouembout
Record not found
Processing record 542 of Set 1 | halifax
Record not found
Record not found
Processing record 543 of Set 1 | tautira
Processing record 544 of Set 1 | binghamton
Processing record 545 of Set 1 | quthing
Processing record 546 of Set 1 | visnes
Processing record 547 of Set 1 | necochea
Processing record 548 of Set 1 | calama
Processing record 549 of Set 1 | galway
Processing record 550 of Set 1 | kamenka
Processing record 551 of Set 1 | puerto lleras
Processing record 552 of Set 1 | sept-iles
I made it through the gauntlet. The message survived!
In [15]:
# Convert array of JSONs into Pandas DataFrame

weather_dict = {"City": cityname,"Latitude": lat, "Longitude":lng,
                "Max Temp":max_temp,"Humidity":humidity,"Cloudiness":cloudiness,
                "Wind Speed":wind_speed,"Country":country, "Date":date}
weather_data = pd.DataFrame(weather_dict)
weather_data.head()
Out[15]:
City	Latitude	Longitude	Max Temp	Humidity	Cloudiness	Wind Speed	Country	Date
0	Lagoa	37.1363	-8.4541	66.80	68	0	8.03	PT	1569736800
1	Rikitea	-23.1203	-134.9692	71.66	86	6	10.51	PF	1569736800
2	Albany	42.6512	-73.7550	64.40	95	88	4.76	US	1569736800
3	Esperance	-33.8583	121.8932	62.44	87	37	18.97	AU	1569736800
4	Faanui	-16.4834	-151.7500	78.16	84	19	20.13	PF	1569736800
In [16]:
# Export the City_Data into a csv
weather_data.to_csv(r'output_data\my_weather_data.csv')
# Show Record Count
countforme = len(weather_data)
countforme
Out[16]:
552
In [17]:
# Display the City Data Frame
weather_data.head()
Out[17]:
City	Latitude	Longitude	Max Temp	Humidity	Cloudiness	Wind Speed	Country	Date
0	Lagoa	37.1363	-8.4541	66.80	68	0	8.03	PT	1569736800
1	Rikitea	-23.1203	-134.9692	71.66	86	6	10.51	PF	1569736800
2	Albany	42.6512	-73.7550	64.40	95	88	4.76	US	1569736800
3	Esperance	-33.8583	121.8932	62.44	87	37	18.97	AU	1569736800
4	Faanui	-16.4834	-151.7500	78.16	84	19	20.13	PF	1569736800
In [ ]:
 
Convert Raw Data to DataFrame

Export the city data into a .csv.
Display the DataFrame
In [ ]:
#above
In [ ]:
#above
Plotting the Data

Use proper labeling of the plots using plot titles (including date of analysis) and axes labels.
Save the plotted figures as .pngs.
Latitude vs. Temperature Plot
In [20]:
# Build scatter plot for latitude vs. temperature
# Incorporate the other graph properties
# Save the figure
# Show plot
scatlat = weather_data["Latitude"]
scattemp = weather_data["Max Temp"]

plt.scatter(scatlat,scattemp)
plt.title('City Latitude vs. Max Temperature')
plt.xlabel('Latitude')
plt.ylabel('Max Temperature (F)')
plt.savefig('scatplotlatitudemaxtemp')
plt.show()

#This code is analyzing the max temperature of each city and latitude. 

In [ ]:
#Your first objective is to build a series of scatter plots to showcase the following relationships:

#Temperature (F) vs. Latitude
#Humidity (%) vs. Latitude
#Cloudiness (%) vs. Latitude
#Wind Speed (mph) vs. Latitude

#After each plot add a sentence or too explaining what the code is and analyzing.
Latitude vs. Humidity Plot
In [21]:
# Build the scatter plots for latitude vs. humidity
# Incorporate the other graph properties
# Save the figure
# Show plot

#scatlat = weather_data["Latitude"]
scathum = weather_data["Humidity"]

plt.scatter(scatlat,scathum)
plt.title('City Latitude vs. Humidity')
plt.xlabel('Latitude')
plt.ylabel('Humidity (%)')
plt.savefig('scatplotlatitudehumidity')
plt.show()

Latitude vs. Cloudiness Plot
In [22]:
# Build the scatter plots for latitude vs. cloudiness
# Incorporate the other graph properties
# Save the figure
# Show plot
#scatlat = weather_data["Latitude"]
scatcloud = weather_data["Cloudiness"]

plt.scatter(scatlat,scatcloud)
plt.title('City Latitude vs. Cloudiness')
plt.xlabel('Latitude')
plt.ylabel('Cloudiness (%)')
plt.savefig('scatplotlatitudecloudiness')
plt.show()

Latitude vs. Wind Speed Plot
In [23]:
# Build the scatter plots for latitude vs. wind speed
# Incorporate the other graph properties
# Save the figure
# Show plot

#scatlat = weather_data["Latitude"]
scatwindsp = weather_data["Wind Speed"]

plt.scatter(scatlat,scatwindsp)
plt.title('City Latitude vs. Wind Speed')
plt.xlabel('Latitude')
plt.ylabel('Wind Speed (mph)')
plt.savefig('scatplotlatitudewindspeed')
plt.show()

Linear Regression
In [34]:
# OPTIONAL: Create a function to create Linear Regression plots
def plot_linear_regression(x_values, y_values, title, text_coordinates):
    (slope, intercept, rvalue, pvalue, stderr) = linregress(x_values, y_values)
    regress_values = x_values * slope + intercept
    line_eq = "y = " + str(round(slope,2)) + "x + " + str(round(intercept,2))
    
    plt.scatter(x_values,y_values)
    plt.plot(x_values,regress_values,"r-")
    plt.annotate(line_eq,text_coordinates,fontsize=14,color="red")
    plt.xlabel("Latitude")
    plt.ylabel(title)
    print(f"The r-squared is: {rvalue}")
    plt.show()
In [33]:
# Create Northern and Southern Hemisphere DataFrames
northlat_df = weather_data.loc[weather_data["Latitude"] >= 0,:]
southlat_df = weather_data.loc[weather_data["Latitude"] < 0,:]

northlat_df.head()
Out[33]:
City	Latitude	Longitude	Max Temp	Humidity	Cloudiness	Wind Speed	Country	Date
0	Lagoa	37.1363	-8.4541	66.80	68	0	8.03	PT	1569736800
2	Albany	42.6512	-73.7550	64.40	95	88	4.76	US	1569736800
7	Klaksvik	62.2266	-6.5891	48.01	96	100	17.13	FO	1569736800
8	Saint-Philippe	45.3584	-73.4791	55.69	63	48	9.71	CA	1569736800
9	Banda Aceh	5.5577	95.3222	82.80	73	40	8.30	ID	1569736800
In [ ]:
# Calculate the correlation coefficient and linear regression model for mouse weight and average tumor volume for the Capomulin regimen
corr=round(st.pearsonr(capavg['Weight (g)'],capavg['Tumor Volume (mm3)'])[0],2)
print(f"The correlation between mouse weight and average tumor volume is {corr}")
model=st.linregress(capavg['Weight (g)'],capavg['Tumor Volume (mm3)'])
model
In [ ]:
#capavg['Weight (g)']
mslope = 0.9544396890241045
bintercept = 21.552160532685015


y_values = capavg['Weight (g)']*mslope+bintercept
plt.scatter(capavg['Weight (g)'],capavg['Tumor Volume (mm3)'])
plt.plot(capavg['Weight (g)'],y_values,color="red")
plt.xlabel('Weight(g)')
plt.ylabel('Average Tumore Volume (mm3)')

plt.savefig('scatplotlatitudewindspeed')
plt.show()
In [ ]:
#Your next objective is to run linear regression on each relationship, only this time separating 
#them into Northern Hemisphere (greater than or equal to 0 degrees latitude) and 
#Southern Hemisphere (less than 0 degrees latitude):

#Northern Hemisphere - Temperature (F) vs. Latitude
#Southern Hemisphere - Temperature (F) vs. Latitude
#Northern Hemisphere - Humidity (%) vs. Latitude
#Southern Hemisphere - Humidity (%) vs. Latitude
#Northern Hemisphere - Cloudiness (%) vs. Latitude
#Southern Hemisphere - Cloudiness (%) vs. Latitude
#Northern Hemisphere - Wind Speed (mph) vs. Latitude
#Southern Hemisphere - Wind Speed (mph) vs. Latitude

#After each pair of plots explain what the linear regression is analyzing, any relationships you notice and any other analysis you may have.
Northern Hemisphere - Max Temp vs. Latitude Linear Regression
In [47]:
x_values = northlat_df["Latitude"]
y_values = northlat_df["Max Temp"]
plot_linear_regression(x_values,y_values,'Max Temp',(6,30))

plt.savefig('northerntemplat')
The r-squared is: -0.8538873563621857

<Figure size 432x288 with 0 Axes>
Southern Hemisphere - Max Temp vs. Latitude Linear Regression
In [48]:
x_values = southlat_df["Latitude"]
y_values = southlat_df["Max Temp"]
plot_linear_regression(x_values,y_values,'Max Temp',(6,30))

plt.savefig('southerntemplat')

print("The high r value indicates a strong positive correlation between latitude and max temperature.")
The r-squared is: 0.7139905719624885

The high r value indicates a strong positive correlation between latitude and max temperature.
<Figure size 432x288 with 0 Axes>
Northern Hemisphere - Humidity (%) vs. Latitude Linear Regression
In [49]:
x_values = northlat_df["Latitude"]
y_values = northlat_df["Humidity"]
plot_linear_regression(x_values,y_values,'Humidity',(6,30))

plt.savefig('northernhumlat')
The r-squared is: 0.06633234271392527

<Figure size 432x288 with 0 Axes>
Southern Hemisphere - Humidity (%) vs. Latitude Linear Regression
In [50]:
x_values = southlat_df["Latitude"]
y_values = southlat_df["Humidity"]
plot_linear_regression(x_values,y_values,'Humidity',(6,30))

plt.savefig('southernhumlat')

print("The low r values indicate a weak to no relationship between humidity and latitude.")
The r-squared is: 0.029262493122300268

The low r values indicate a weak to no relationship between humidity and latitude.
<Figure size 432x288 with 0 Axes>
Northern Hemisphere - Cloudiness (%) vs. Latitude Linear Regression
In [51]:
x_values = northlat_df["Latitude"]
y_values = northlat_df["Cloudiness"]
plot_linear_regression(x_values,y_values,'Cloudiness',(6,30))

plt.savefig('northerncloudlat')
The r-squared is: 0.10857260363070294

<Figure size 432x288 with 0 Axes>
Southern Hemisphere - Cloudiness (%) vs. Latitude Linear Regression
In [52]:
x_values = southlat_df["Latitude"]
y_values = southlat_df["Cloudiness"]
plot_linear_regression(x_values,y_values,'Cloudiness',(6,30))

plt.savefig('southerncloudlat')

print("The low r values indicate a weak positive relationship between latitude and cloudiness.")
The r-squared is: 0.10679241952290094

The low r values indicate a weak positive relationship between latitude and cloudiness.
<Figure size 432x288 with 0 Axes>
Northern Hemisphere - Wind Speed (mph) vs. Latitude Linear Regression
In [53]:
x_values = northlat_df["Latitude"]
y_values = northlat_df["Wind Speed"]
plot_linear_regression(x_values,y_values,'Wind Speed',(6,30))

plt.savefig('northernwindlat')
The r-squared is: 0.02713327522746483

<Figure size 432x288 with 0 Axes>
Southern Hemisphere - Wind Speed (mph) vs. Latitude Linear Regression
In [54]:
x_values = southlat_df["Latitude"]
y_values = southlat_df["Wind Speed"]
plot_linear_regression(x_values,y_values,'Wind Speed',(6,30))

plt.savefig('southernwindlat')

print("The low r values indicate that there is no real relationship between wind speed and latitude. The difference between the hemispheres doesn't seem to be significant enough to comment upon.")
      
The r-squared is: -0.3002462129697697

The low r values indicate that there is no real relationship between wind speed and latitude. The difference between the hemispheres doesn't seem to be significant enough to comment upon.
<Figure size 432x288 with 0 Axes>
